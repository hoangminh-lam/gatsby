{"version":3,"sources":["webpack:///./src/pages/login.js"],"names":["loginRef","useRef","pwdRef","login","a","identifier","current","value","password","fetch","method","headers","body","JSON","stringify","then","res","status","Error","json","jwt","user","window","sessionStorage","setItem","navigate","console","log","className","type","placeholder","ref","onClick"],"mappings":"qTAKe,qBACb,IAAMA,EAAWC,mBACXC,EAASD,mBAETE,EAAK,e,EAAA,G,EAAA,UAAG,oCAAAC,EAAA,6DACNC,EAAaL,EAASM,QAAQC,MAC9BC,EAAWN,EAAOI,QAAQC,MAFpB,kBAKgBE,MAXf,qDAW+B,CACxCC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBT,aACAG,eAEDO,MAAK,SAAAC,GACN,GAAmB,MAAfA,EAAIC,OACN,MAAM,IAAIC,MAAM,YAElB,OAAOF,EAAIG,UAlBH,gBAKHC,EALG,EAKHA,IAAKC,EALF,EAKEA,KAgBZC,OAAOC,eAAeC,QAAQ,MAAOJ,GACrCE,OAAOC,eAAeC,QAAQ,OAAQX,KAAKC,UAAUO,IAErDI,mBAAS,KAxBC,kDA0BVC,QAAQC,IAAR,MA1BU,yD,+KAAH,qDA8BX,OACI,yBAAKC,UAAU,WACb,yBAAKA,UAAU,YACb,2BAAOC,KAAK,OAAOC,YAAY,UAAUC,IAAK/B,IAC9C,2BAAO6B,KAAK,WAAWC,YAAY,QAAQC,IAAK7B,IAChD,4BAAQ8B,QAAS,kBAAM7B,MAAvB","file":"component---src-pages-login-js-475b83cc312868460dcc.js","sourcesContent":["import React, { useRef } from 'react'\nimport { navigate } from 'gatsby'\n\nconst endpoint = 'https://lam-strapi-gatsby.herokuapp.com/auth/local';\n\nexport default () => {\n  const loginRef = useRef();\n  const pwdRef = useRef();\n\n  const login = async () => {\n    const identifier = loginRef.current.value;\n    const password = pwdRef.current.value;\n\n    try {\n      const {jwt, user} = await fetch(endpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          identifier,\n          password,\n        }),\n      }).then(res => {\n        if (res.status !== 200) {\n          throw new Error('ログイン出来ない');\n        }\n        return res.json()\n      });\n\n      window.sessionStorage.setItem('jwt', jwt);\n      window.sessionStorage.setItem('user', JSON.stringify(user));\n\n      navigate('/');\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return (\n      <div className=\"allCont\">\n        <div className=\"register\">\n          <input type=\"text\" placeholder=\"ユーザーネーム\" ref={loginRef} />\n          <input type=\"password\" placeholder=\"パスワード\" ref={pwdRef} />\n          <button onClick={() => login()}>ログイン</button>\n        </div>\n      </div>\n  );\n};\n\n// export default registerPage"],"sourceRoot":""}