(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"8oq6":function(e,n,t){"use strict";t.r(n),t.d(n,"userInfoPageQuery",(function(){return m}));t("6kNP"),t("8npG"),t("3nLz");var a=t("o0o1"),r=t.n(a),l=(t("ls82"),t("q1tI")),u=t.n(l),o=t("Wbzz"),c=t("9eSz"),i=t.n(c),s=t("Bl7J");function p(e,n,t,a,r,l,u){try{var o=e[l](u),c=o.value}catch(i){return void t(i)}o.done?n(c):Promise.resolve(c).then(a,r)}n.default=function(e){var n,t=e.data,a=Object(l.useRef)(),c=Object(l.useRef)(),m=Object(l.useRef)(),f=Object(l.useRef)();Object(l.useEffect)((function(){var e=window.sessionStorage.getItem("jwt");e||Object(o.navigate)("/login"),f.current=e}),[]);var d=function(){var e,t=(e=r.a.mark((function e(){var t,l,u,o,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.current.value,l=c.current.value,u=m.current.value,o=window.sessionStorage.getItem("user").id,i=new FormData,s={user_name:t,position:l,user_explain:u,author:o},i.append("files.user_img",n,"images.jpg"),i.append("data",JSON.stringify(s)),e.next=10,fetch("https://lam-strapi-gatsby.herokuapp.com/user-infos",{method:"POST",headers:{Authorization:"Bearer "+f.current},body:i}).then((function(e){return e.json()}));case 10:window.location.reload();case 11:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(a,r){var l=e.apply(n,t);function u(e){p(l,a,r,u,o,"next",e)}function o(e){p(l,a,r,u,o,"throw",e)}u(void 0)}))});return function(){return t.apply(this,arguments)}}();return u.a.createElement(s.a,null,u.a.createElement("h1",null,"ユーザー情報"),u.a.createElement("ul",null,t.allStrapiUserInfo.edges.map((function(e){return u.a.createElement("li",{key:e.node.id},u.a.createElement("h2",null,u.a.createElement(o.Link,{to:"/user-info/"+e.node.id},e.node.user_name)),u.a.createElement(i.a,{fixed:e.node.user_img.childImageSharp.fixed}),u.a.createElement("p",null,e.node.explain))}))),u.a.createElement("div",{className:"userInput"},u.a.createElement("p",null,u.a.createElement("span",null,"名前："),u.a.createElement("input",{type:"text",name:"user_name",placeholder:"名前",ref:a})),u.a.createElement("p",null,u.a.createElement("span",null,"画像："),u.a.createElement("input",{onChange:function(e){n=e.target.files[0]},type:"file",name:"user_img",src:""})),u.a.createElement("p",null,u.a.createElement("span",null,"ポジション："),u.a.createElement("input",{type:"text",name:"position",placeholder:"Position",ref:c})),u.a.createElement("p",null,u.a.createElement("span",null,"自己紹介："),u.a.createElement("textarea",{placeholder:"自己紹介",name:"user_explain",ref:m})),u.a.createElement("button",{onClick:function(){return d()}},"登録")),u.a.createElement("p",null,u.a.createElement(o.Link,{to:"/"},"Top Page")))};var m="907485606"}}]);
//# sourceMappingURL=component---src-pages-user-info-index-js-2fa0d034dd091cbb68d1.js.map